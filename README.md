# HW 5 MPI

## Требования для запуска

1. CMake 3.20 или выше.
2. Компилятор с поддержкой C++17.
3. Установленный MPI.
4. ОС на основе UNIX.
5. [UCI для работы с Unicode.](https://github.com/unicode-org/icu)
6. Python 3.7 с [matplotlib](https://matplotlib.org/stable/index.html). Только для визуализации.

## Задания

### Знакомство в компании

[Исходный код программы](mpi/src/contact.cpp)

### Параллельный одномерный клеточный автомат

[Исходный код программы](mpi/src/cellular_automat.cpp)

Периодические, непериодические граничные условия и номер правила задаются через аргументы командной строки.

[График ускорения работы программы от числа процессов](images/perf.md)

[Картинка эволюции для правил](images/evolution.md)


### Бонус

[топ-10 встречающихся слов в романе "Война и Мир" Л. Н. Толстого](mpi/src/word_counter.cpp)

[Результат расчётов](data/top_n.txt)

При расчётах все слова были приведены к нижнему регистру, а также была произведена Unicode нормализация.

[Первый две части в текстовом формате можно скачать с ЛитРес](https://www.litres.ru/lev-tolstoy/voyna-i-mir-kniga-1/)

## Как запустить

Создать директорию: `build`.
```
mkdir build
cmake -S . -B ./build
```

Выполнить CMake:
```bash
cmake --build ./build --config Release --parallel $(nproc) --target all
```

Запуск знакомство в компании:
```
mpiexec -n 3 ./build/mpi/contact
```

Запуск расчётов для клеточного автомата:
```
mpiexec -n 6 ./build/mpi/cellular_automat 100 90 100 b
```

100- число ячеек, 90-номер правила, 100- число шагов эволюции, b-периодические граничные условия.

Запуск расчёт топ-N слов. Разбить файл на части по количеству строк, равному число процессов для запуска. Например: `text.txt` необходимо разбить на `text0.txt, text1.txt, text2.txt`. Запустит программу:
```
mpiexec -n 3 ./build/mpi/word_counter text 10
```
10- это число наиболее встречающихся слов для выбора.

Результаты сохраняются в `top_n.txt` в текущей рабочей директории.

